<!DOCTYPE html>
<html>

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width">
<link rel="icon" href=/fav.png type="image/gif">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
  <link
          href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
</noscript>


<link rel="stylesheet" href="/css/font.css" media="all">



<meta property="og:title" content="Go Templates for Containers" />
<meta property="og:description" content="Golang allows us to manage our containers more effectively. :zap:
Golang, also known simply as Go, is a modern programming language known for its simplicity, efficiency, and ease in handling concurrency. A powerful feature of Go that is often overlooked is Go Templates, which allow developers to generate dynamic content from static or dynamic data.
Go Templates are incredibly useful when it comes to managing and administering Docker containers and Kubernetes pods." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hugo-profile.netlify.app/blogs/go-templates/" /><meta property="article:section" content="blogs" />
<meta property="article:published_time" content="2021-05-17T22:53:58+05:30" />
<meta property="article:modified_time" content="2021-05-17T22:53:58+05:30" /><meta property="og:site_name" content="Hugo Profile" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Go Templates for Containers"/>
<meta name="twitter:description" content="Golang allows us to manage our containers more effectively. :zap:
Golang, also known simply as Go, is a modern programming language known for its simplicity, efficiency, and ease in handling concurrency. A powerful feature of Go that is often overlooked is Go Templates, which allow developers to generate dynamic content from static or dynamic data.
Go Templates are incredibly useful when it comes to managing and administering Docker containers and Kubernetes pods."/>


<link rel="stylesheet" href="/bootstrap-5/css/bootstrap.min.css" media="all"><link rel="stylesheet" href="/css/header.css" media="all">
<link rel="stylesheet" href="/css/footer.css" media="all">


<link rel="stylesheet" href="/css/theme.css" media="all">




<style>
    :root {
        --text-color: #343a40;
        --text-secondary-color: #6c757d;
        --background-color: #eaedf0;
        --secondary-background-color: #64ffda1a;
        --primary-color: #007bff;
        --secondary-color: #f8f9fa;

         
        --text-color-dark: #e4e6eb;
        --text-secondary-color-dark: #b0b3b8;
        --background-color-dark: #18191a;
        --secondary-background-color-dark: #212529;
        --primary-color-dark: #ffffff;
        --secondary-color-dark: #212529;
    }
    body {
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        text-align: left;
    }

    html {
        background-color: var(--background-color) !important;
    }

    body::-webkit-scrollbar {
        width: .5em;
        height: .5em;
        background-color: var(--background-color);
    }
    
    ::-webkit-scrollbar-track {
        box-shadow: inset 0 0 6px var(--background-color);
        border-radius: 1rem;
    }
    
    ::-webkit-scrollbar-thumb {
        border-radius: 1rem;
        background-color: var(--secondary-color);
        outline: 1px solid var(--background-color);
    }

    #search-content::-webkit-scrollbar {
        width: .5em;
        height: .1em;
        background-color: var(--background-color);
    }
</style>

<meta name="description" content="">
<link rel="stylesheet" href="/css/single.css">


<script defer src="/fontawesome-5/all-5.15.4.js"></script>

  <title>
Go Templates for Containers | VSR Profile

  </title>
</head>

<body class="light">
  
  
<script>
    let localStorageValue = localStorage.getItem("pref-theme");
    let mediaQuery = window.matchMedia('(prefers-color-scheme: dark)').matches;

    switch (localStorageValue) {
        case "dark":
            document.body.classList.add('dark');
            break;
        case "light":
            document.body.classList.remove('dark');
            break;
        default:
            if (mediaQuery) {
                document.body.classList.add('dark');
            }
            break;
    }
</script>



<header>
    <nav class="pt-3 navbar navbar-expand-lg animate">
        <div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5">
            
            <a class="navbar-brand primary-font text-wrap" href="/">
                
                <img src="/fav.png" width="30" height="30"
                    class="d-inline-block align-top">
                Hugo Profile
                
            </a>

            
                <div>
                    <input id="search" autocomplete="off" class="form-control mr-sm-2 d-none d-md-block" placeholder='Ctrl &#43; k to Search...'
                        aria-label="Search" oninput="searchOnChange(event)">
                </div>
            

            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true">
                    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
                </svg>
            </button>

            
            <div class="collapse navbar-collapse text-wrap primary-font" id="navbarContent">
                <ul class="navbar-nav ms-auto text-center">
                    
                        <li class="nav-item navbar-text d-block d-md-none">
                            <div class="nav-link">
                                <input id="search" autocomplete="off" class="form-control mr-sm-2" placeholder='Ctrl &#43; k to Search...' aria-label="Search" oninput="searchOnChange(event)">
                            </div>
                        </li>
                    

                    

                    

                    

                    

                    

                    

                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/blogs" title="Blog posts">
                            
                            Blog
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="" title="Videos">
                            
                            Videos
                        </a>
                    </li>
                    
                    

                    
                    <li class="nav-item navbar-text">
                        
                        <div class="text-center">
                            <button id="theme-toggle">
                                <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                                <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                            </button>
                        </div>
                    </li>
                    

                </ul>

            </div>
        </div>
    </nav>
</header>
<div id="content">
<section id="single">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-md-12 col-lg-9">
        <div class="pr-lg-4">
          <div class="title mb-5">
            <h1 class="text-center mb-4">Go Templates for Containers</h1>
            <div class="text-center">
              Victor S. Recio 
              <small>|</small>
              May 17, 2021

              
              <span id="readingTime">
                min read
              </span>
              
            </div>
          </div>
          
          <div class="featured-image">
            <img class="img-fluid" src="/images/gotemplate.png" alt="Go Templates for Containers">
          </div>
          
          <article class="page-content  p-2">
          <p>Golang allows us to manage our containers more effectively. ⚡</p>
<p>Golang, also known simply as Go, is a modern programming language known for its simplicity, efficiency, and ease in handling concurrency. A powerful feature of Go that is often overlooked is Go Templates, which allow developers to generate dynamic content from static or dynamic data.</p>
<p>Go Templates are incredibly useful when it comes to managing and administering Docker containers and Kubernetes pods. In this article, we will explore how to use Go Templates to do just that.</p>
<h2 id="what-are-go-templates">What are Go Templates?</h2>
<p>Go Templates provide a simple and flexible way to generate dynamic content in Go. They are particularly useful for building dynamic configuration files, reports, HTML, and more.</p>
<p>A Go Template is a string or file that can interpret and substitute variables and can even execute simple functions. For example, the following is a simple Go Template:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{.<span style="color:#a6e22e">Count</span>}} <span style="color:#a6e22e">items</span> <span style="color:#a6e22e">are</span> <span style="color:#a6e22e">made</span> <span style="color:#a6e22e">of</span> {{.<span style="color:#a6e22e">Material</span>}}
</span></span></code></pre></div><p>In this template, <code>.Count</code> and <code>.Material</code> are variables that can be substituted with real values.</p>
<h2 id="actions">Actions</h2>
<p>Before we learn how to implement it, let’s take a look at template’s syntax. Templates are provided to the appropriate functions either as string or as “raw string”. Actions represents the data evaluations, functions or control loops. They’re delimited by <strong><code>{{ }}</code></strong>. Other, non delimited parts are left untouched.</p>
<h2 id="go-templates-in-docker">Go Templates in Docker</h2>
<p>Currently it is not a secret that in the world of containers, the <a href="https://www.tldevtech.com/best-projects-made-with-go-lang/">top 10</a> of the tools are created in Golang, (the programming language created by Google), which allows us to make use of the characteristics of this language for the administration of our containers. Docker uses a variant of Go Templates in several places, but one of the most useful is in the <code>docker inspect</code> command, which allows you to view the details of a container or image.</p>
<p>For example, if we want to get the IP address of a running container, we can use a Go Template with the <code>docker inspect</code> command as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker inspect -f <span style="color:#e6db74">&#39;{{.NetworkSettings.IPAddress}}&#39;</span> my_container
</span></span></code></pre></div><p>In this case, the Go Template <code>{{.NetworkSettings.IPAddress}}</code> extracts the IP address of the <code>my_container</code> container.</p>
<p>One of the most important steps in the administration of our containers is the visualization of the content of these or the inspection of the information of the same. For this we have the command docker inspect [container] with which we can view all the information of a container/pod in a Go template &ldquo;Go template&rdquo; with JSON format:</p>
<ul>
<li>Container/pod name</li>
<li>Volumes</li>
<li>IP</li>
<li>ID</li>
<li>Execution Time</li>
<li>Labels</li>
<li>First command executed when the container/pod starts</li>
<li>DNS information</li>
<li>User inside the container/pod</li>
<li>PATH variables</li>
<li>Port</li>
<li>MacAddress</li>
</ul>
<p><img src="/images/terminal_1.png" alt="alt text" title="Optional Title"></p>
<h2 id="go-templates-in-kubernetes">Go Templates in Kubernetes</h2>
<p>Kubernetes also makes extensive use of Go Templates, especially in combination with the <code>kubectl</code> command-line tool.</p>
<p>For example, if we want to get the status of all pods in a specific namespace, we can use a Go Template with the <code>kubectl get pods</code> command as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get pods --sort-by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;.status.containerStatuses[0].restartCount&#39;</span>
</span></span></code></pre></div><p>In this case, the Go Template <code>.status.containerStatuses[0].restartCount</code> generates a list of the statuses of all pods in the <code>my_namespace</code> namespace.</p>
<p><img src="/images/terminal_2.png" alt="alt text" title="Optional Title"></p>
<h2 id="using-go-templates">Using Go Templates</h2>
<p>In Golang, the <code>text/template</code> and <code>html/template</code> packages provide a number of operators that you can use within templates. Here are a few examples:</p>
<p><strong>Print fields of a struct:</strong></p>
<p>If you have a struct with fields, you can print the value of those fields using the <code>.</code> operator.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Item</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Name</span>  <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Price</span> <span style="color:#66d9ef">float64</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">item</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Item</span>{<span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;Apple&#34;</span>, <span style="color:#a6e22e">Price</span>: <span style="color:#ae81ff">0.99</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">Must</span>(<span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;item&#34;</span>).<span style="color:#a6e22e">Parse</span>(<span style="color:#e6db74">&#34;Item Name: {{.Name}}, Item Price: {{.Price}}\n&#34;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Execute</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>, <span style="color:#a6e22e">item</span>)  <span style="color:#75715e">// Output: Item Name: Apple, Item Price: 0.99
</span></span></span></code></pre></div><p><strong>Pipe operator (<code>|</code>):</strong></p>
<p>You can use the pipe operator (<code>|</code>) to chain actions together. For example, you can use it with the <code>printf</code> function to format a string:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">Must</span>(<span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;item&#34;</span>).<span style="color:#a6e22e">Parse</span>(<span style="color:#e6db74">&#34;{{.Name | printf \&#34;Item Name: %s\&#34;}}\n&#34;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Execute</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>, <span style="color:#a6e22e">item</span>)  <span style="color:#75715e">// Output: Item Name: Apple
</span></span></span></code></pre></div><p><strong>Conditional (<code>if-else</code>) operator:</strong></p>
<p>You can use <code>if-else</code> statements in your templates to include optional content.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">Must</span>(<span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;item&#34;</span>).<span style="color:#a6e22e">Parse</span>(<span style="color:#e6db74">&#34;{{if .Price}}Price: ${{.Price}}{{else}}Price not available{{end}}\n&#34;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Execute</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>, <span style="color:#a6e22e">item</span>)  <span style="color:#75715e">// Output: Price: $0.99
</span></span></span></code></pre></div><p><strong>Range operator:</strong></p>
<p>The <code>range</code> operator can be used to iterate over arrays, slices, maps, or channels.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Inventory</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Items</span> []<span style="color:#a6e22e">Item</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">inventory</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Inventory</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Items</span>: []<span style="color:#a6e22e">Item</span>{
</span></span><span style="display:flex;"><span>            {<span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;Apple&#34;</span>, <span style="color:#a6e22e">Price</span>: <span style="color:#ae81ff">0.99</span>},
</span></span><span style="display:flex;"><span>            {<span style="color:#a6e22e">Name</span>: <span style="color:#e6db74">&#34;Banana&#34;</span>, <span style="color:#a6e22e">Price</span>: <span style="color:#ae81ff">0.59</span>},
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">Must</span>(<span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;inventory&#34;</span>).<span style="color:#a6e22e">Parse</span>(<span style="color:#e6db74">&#34;{{range .Items}}Item: {{.Name}}, Price: ${{.Price}}\n{{end}}&#34;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Execute</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>, <span style="color:#a6e22e">inventory</span>)  
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Output: Item: Apple, Price: $0.99
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//         Item: Banana, Price: $0.59
</span></span></span></code></pre></div><p><strong>Comparison operators:</strong></p>
<p>Go templates also support comparison operators such as <code>eq</code> (equal), <code>ne</code> (not equal), <code>lt</code> (less than), <code>le</code> (less than or equal to), <code>gt</code> (greater than), and <code>ge</code> (greater than or equal to).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">Must</span>(<span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">New</span>(<span style="color:#e6db74">&#34;item&#34;</span>).<span style="color:#a6e22e">Parse</span>(<span style="color:#e6db74">&#34;{{if .Price | lt .5}}This item is cheap.{{else}}This item is expensive.{{end}}\n&#34;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Execute</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>, <span style="color:#a6e22e">item</span>)  <span style="color:#75715e">// Output: This item is expensive.
</span></span></span></code></pre></div><p>Remember, you need to import the <code>text/template</code> or <code>html/template</code> package and use <code>template.Must</code> along with <code>template.New</code> and <code>Parse</code> to create a new template. The <code>Execute</code> method is then used to substitute the variables and write the output.</p>
<h2 id="automating-task-in-kubernetes-with-go-templates">Automating task in Kubernetes with Go Templates</h2>
<p>Go templates can be incredibly useful for automating tasks in Kubernetes, as Kubernetes uses a declarative architecture based on desired state defined in YAML files. This guide will show you how you can use Go templates to dynamically generate these YAML files.</p>
<p>Suppose you have a basic Kubernetes deployment. An example template could look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">apps/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Deployment</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: {{<span style="color:#ae81ff">.Name}}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">app</span>: {{<span style="color:#ae81ff">.Name}}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicas</span>: {{<span style="color:#ae81ff">.Replicas}}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">selector</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">matchLabels</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">app</span>: {{<span style="color:#ae81ff">.Name}}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">labels</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">app</span>: {{<span style="color:#ae81ff">.Name}}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: {{<span style="color:#ae81ff">.Name}}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">image</span>: {{<span style="color:#ae81ff">.Image}}</span>
</span></span></code></pre></div><p>Here, <code>.Name</code>, <code>.Replicas</code>, and <code>.Image</code> are variables that will be substituted with real values.</p>
<p>Next, you can use Go to generate this Kubernetes deployment file dynamically. Here&rsquo;s an example of how you can do this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;os&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;text/template&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Deployment</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Name</span>     <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Replicas</span> <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Image</span>    <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">ParseFiles</span>(<span style="color:#e6db74">&#34;deployment.yaml&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        panic(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">d</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Deployment</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Name</span>:     <span style="color:#e6db74">&#34;my-app&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Replicas</span>: <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Image</span>:    <span style="color:#e6db74">&#34;my-app:1.0.0&#34;</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Execute</span>(<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Stdout</span>, <span style="color:#a6e22e">d</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
</span></span><span style="display:flex;"><span>        panic(<span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This Go script will read the <code>deployment.yaml</code> file, substitute the variables with the values from the <code>Deployment</code> struct, and then print out the result. You can redirect this output to a file or directly to <code>kubectl</code> to create the deployment.</p>
<p>This is useful if you need to create many deployments that are similar but have slight differences, like the application name or Docker image to use. Instead of creating and maintaining many different YAML files, you can maintain a single template and generate the YAML files dynamically as you need them.</p>
<p>You can also take this a step further and integrate it into an automation script or a CI/CD tool to automate the entire deployment process, a good example about it is the package manager that kubernetes currently is using.</p>
<p><a href="https://helm.sh/">Helm</a> is this example that we mentioned above, which is a package manager for Kubernetes that streamlines the process of installing and managing Kubernetes applications. Helm uses a packaging format known as &ldquo;charts&rdquo;. A chart is a collection of files that describe a related set of Kubernetes resources.</p>
<p>One key feature of Helm is that it leverages Go templates to generate the Kubernetes configuration files for each deployment. These templates allow you to parameterize your configurations, which leads to more reusability and flexibility. With Helm&rsquo;s templating system, you can have one chart that deploys to different environments (like staging and production) simply by using different values files.</p>
<p>Therefore, using Helm with Go templates makes managing Kubernetes applications more maintainable, scalable, and customizable.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Go Templates are a powerful and flexible feature of Go that can greatly facilitate the management and administration of Docker containers and Kubernetes pods. By allowing the generation of dynamic content, Go Templates give us the ability to extract and manipulate information in a way that would be much more difficult to do manually.</p>
<p>Therefore, if you&rsquo;re working with Docker or Kubernetes, I encourage you to dive deeper into Go Templates. Not only will they help you get the most out of these tools, but they will also give you a new way of thinking about programming in Go.</p>

          </article>
        </div>
      </div>
      <div class="col-sm-12 col-md-12 col-lg-3">
        <div class="sticky-sidebar">
          
          <aside class="toc">
              <h5>
                Table Of Contents
              </h5>
              <div class="toc-content">
                <nav id="TableOfContents">
  <ul>
    <li><a href="#what-are-go-templates">What are Go Templates?</a></li>
    <li><a href="#actions">Actions</a></li>
    <li><a href="#go-templates-in-docker">Go Templates in Docker</a></li>
    <li><a href="#go-templates-in-kubernetes">Go Templates in Kubernetes</a></li>
    <li><a href="#using-go-templates">Using Go Templates</a></li>
    <li><a href="#automating-task-in-kubernetes-with-go-templates">Automating task in Kubernetes with Go Templates</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
              </div>
          </aside>
          

          
          <aside class="tags">
            <h5>Tags</h5>
            <ul class="tags-ul list-unstyled list-inline">
              
              <li class="list-inline-item"><a href="https://hugo-profile.netlify.app/tags/containers" target="_blank">Containers</a></li>
              
              <li class="list-inline-item"><a href="https://hugo-profile.netlify.app/tags/golang" target="_blank">Golang</a></li>
              
              <li class="list-inline-item"><a href="https://hugo-profile.netlify.app/tags/docker" target="_blank">Docker</a></li>
              
              <li class="list-inline-item"><a href="https://hugo-profile.netlify.app/tags/kubernetes" target="_blank">Kubernetes</a></li>
              
            </ul>
          </aside>
          

          
          <aside class="social">
            <h5>Social</h5>
            <div class="social-content">
              <ul class="list-inline">
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://twitter.com/share?text=Go%20Templates%20for%20Containers&url=https%3a%2f%2fhugo-profile.netlify.app%2fblogs%2fgo-templates%2f">
                    <i class="fab fa-twitter"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://api.whatsapp.com/send?text=Go%20Templates%20for%20Containers: https%3a%2f%2fhugo-profile.netlify.app%2fblogs%2fgo-templates%2f">
                    <i class="fab fa-whatsapp"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href='mailto:?subject=Go%20Templates%20for%20Containers&amp;body=Check%20out%20this%20site https%3a%2f%2fhugo-profile.netlify.app%2fblogs%2fgo-templates%2f'>
                    <i class="fa fa-envelope"></i>
                  </a>
                </li>
              </ul>
            </div>
          </aside>
          
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-9 p-4">
        
      </div>
    </div>
  </div>
  <button class="p-2 px-3" onclick="topFunction()" id="topScroll">
    <i class="fas fa-angle-up"></i>
  </button>
</section>


<div class="progress">
  <div id="scroll-progress-bar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<Script src="/js/scrollProgressBar.js"></script>


<script>
  var topScroll = document.getElementById("topScroll");
  window.onscroll = function() {scrollFunction()};

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      topScroll.style.display = "block";
    } else {
      topScroll.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }
</script>


<script src="/js/readingTime.js"></script>



  </div><footer>
    <div class="container py-3" id="recent-posts">
    
</div><div class="text-center pt-2">
    

    

    

    

    
</div><div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-4 text-center">
            <div class="pb-2">
                <a href="https://hugo-profile.netlify.app" title="VSR Profile">
                    <img alt="Footer logo" src="/fav.png"
                        height="40px" width="40px">
                </a>
            </div>
            &copy; 2023  All rights reserved
            <div class="text-secondary">
                Made with
                <span class="text-danger">
                    &#10084;
                </span>
                and
                <a href="https://github.com/gurusabarish/hugo-profile" target="_blank"
                    title="Designed and developed by gurusabarish">
                    Hugo Profile
                </a>
            </div>
        </div>
    </div>
</div></footer><script src="/bootstrap-5/js/bootstrap.bundle.min.js"></script>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

</script>


    <script src="/js/search.js"></script>








  <section id="search-content" class="py-2">
    <div class="container" id="search-results"></div>
  </section>
</body>

</html>